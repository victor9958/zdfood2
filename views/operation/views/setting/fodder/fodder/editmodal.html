<script type="text/html" template lay-url="{{layui.setter.baseUrl + '/banner/'+ layui.data('fodder').fodder.editId}}" lay-done="layui.form.render()">
<div id="add_modal" class="layui-form layui-form-pane" lay-filter="search-for-examine">
    <div class="layui-inline">
        <label class="layui-form-label">公众号名称</label>
        <div class="layui-input-block">
            <input type="text" value="{{ d.data.wechat_name}}" name="weChatName" autocomplete="off" placeholder="请输入应用模块" class="layui-input">
        </div>
    </div>
    <div class="layui-inline">
        <label class="layui-form-label">应用模块</label>
        <div class="layui-input-block">
            <input type="text" value="{{ d.data.model_name}}" name="modelName" autocomplete="off" placeholder="请输入应用模块" class="layui-input">
        </div>
    </div>
    <div class="layui-inline">
        <label class="layui-form-label">模块位置</label>
        <div class="layui-input-block">
            <input type="text" value="{{ d.data.model_position}}" name="modelPosition" autocomplete="off" placeholder="请输入模块位置" class="layui-input">
        </div>
    </div>
    <div class="layui-inline">
        <label class="layui-form-label">URL</label>
        <div class="layui-input-block">
            <input value="{{ d.data.url}}" type="text" name="url" autocomplete="off" placeholder="请输入URL" class="layui-input">
        </div>
    </div>
    <div class="layui-inline textArea">
        <label class="layui-form-label">标题</label>
        <div class="layui-input-block">
            <textarea value="aaaa" name="bannerTitle" placeholder="请输入标题" class="layui-textarea">{{ d.data.banner_title}}</textarea>
        </div>
    </div>
    <div class="layui-inline">
        <label class="layui-form-label">控制器名</label>
        <div class="layui-input-block">
            <input type="text" name="model_name" value="{{d.data.model_name}}" autocomplete="off" placeholder="请输入模板ID" class="layui-input">
        </div>
    </div>
    <div class="layui-inline">
        <label class="layui-form-label">方法名</label>
        <div class="layui-input-block">
            <input type="text" name="action_name" value="{{d.data.action_name}}" autocomplete="off" placeholder="请输入模板ID" class="layui-input">
        </div>
    </div>
    <div class="layui-inline">
        <label class="layui-form-label">account ID</label>
        <div class="layui-input-block">
            <input type="text" name="account_id" value="{{d.data.account_id}}" autocomplete="off" placeholder="请输入模板ID" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item p-t-10 ft-center">
        <button class="layui-btn ok" lay-submit lay-filter="LAY-edit-child">确定</button>
        <button class="layui-btn layui-btn-primary cancel">取消</button>
    </div>
</div>
</script>
<script>
    layui.use(['admin', 'form'], function(){
        var $ = layui.$
            ,admin = layui.admin
            ,setter = layui.setter
            ,form = layui.form;
        form.render();
        $(function(){
            form.on('submit(LAY-edit-child)', function(obj){
                if(!obj.field.weChatName){
                    layer.msg('请输入公众号名称', {icon: 5, time: 1000});
                }else if(!obj.field.modelName){
                    layer.msg('请输入应用模块', {icon: 5, time: 1000});
                }else if(!obj.field.modelPosition){
                    layer.msg('请输入模块位置', {icon: 5, time: 1000});
                }else if(!obj.field.url){
                    layer.msg('请输入URL', {icon: 5, time: 1000});
                }else if(!obj.field.bannerTitle){
                    layer.msg('请输入标题', {icon: 5, time: 1000});
                }else if(!obj.field.model_name){
                    layer.msg('请输入控制器名', {icon: 5, time: 1000});
                }else if(!obj.field.action_name){
                    layer.msg('请输入方法名', {icon: 5, time: 1000});
                }else if(!obj.field.account_id){
                    layer.msg('请输入account ID', {icon: 5, time: 1000});
                }else{
                    admin.req({
                        url: setter.baseUrl + '/banner/model/'+layui.data('fodder').fodder.editId
                        , type: 'put'
                        ,data:obj.field
                        , done: function (res) {
                            layer.close(admin.popup.index);
                            layer.msg(res.message, {icon: 1, time: 2000});
                            setTimeout(function(){
                                window.parent.location.reload();
                            },2000);
                        }
                    });
                }
            })
        })
        //取消
        $(document).off('click','#add_modal .cancel');
        $(document).on('click','#add_modal .cancel',function(){
            layer.close(admin.popup.index);
        })



    })
</script>

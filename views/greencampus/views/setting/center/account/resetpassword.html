<div class="layui-form centerLayer">
    <div class="layui-form-item">
        <label class="layui-form-label left">旧密码</label>
        <div class="layui-input-block">
            <input type="password" name="oldPassword" lay-verify="password" autocomplete="off" placeholder="请输入旧密码" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label left">新密码</label>
        <div class="layui-input-block">
            <input type="password" name="newPassword" id="newPassword" lay-verify="password" autocomplete="off" placeholder="请输入新密码" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label left">确认密码</label>
        <div class="layui-input-block">
            <input type="password" name="newPassword" lay-verify="repassword" autocomplete="off" placeholder="请输入确认密码" class="layui-input">
        </div>
    </div>

    <div class="layui-form-item p-t-10 ft-center">
        <button class="layui-btn" lay-submit lay-filter="LAY-reset-pass">确定</button>
        <button class="layui-btn layui-btn-primary" id="cancel">取消</button>
    </div>
</div>
<script>
    layui.use(['form'], function(){
        var $ = layui.$,
            admin = layui.admin,
            setter = layui.setter,
            form = layui.form;

        var password = '';
        $(function(){
            form.verify({
                password: function(value,item){
                    if(!/^[\S]{6,12}$/.test(value)){
                        return '密码必须6到12位，且不能出现空格';
                    }
                }
                ,repassword: function(value, item){ //value：表单的值、item：表单的DOM对象
                    password = $('#newPassword').val();
                    if(value != password){
                        return '确认密码与管理密码不符';
                    }
                }
            });

            form.on('submit(LAY-reset-pass)', function(obj){
                //请求添加部门接口
                admin.req({
                    url: setter.baseUrl + '/u-center/account/password'
                    ,type: 'put'
                    ,data: obj.field
                    ,done: function(res){
                        layer.msg(res.message, {icon: 1,time: 2000});
                        layer.close(admin.popup.index);//关闭右侧面板
                    }
                });
            });

        })
    })
</script>